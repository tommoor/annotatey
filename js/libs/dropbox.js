var _ref,_ref1,_ref2;if((_ref=window.Dropbox)==null){window.Dropbox={}}if((_ref1=Dropbox.baseUrl)==null){Dropbox.baseUrl="https://www.dropbox.com"}if((_ref2=Dropbox.blockBaseUrl)==null){Dropbox.blockBaseUrl="https://dl.dropbox.com"}Dropbox.addListener=function(c,b,a){if(c.addEventListener){c.addEventListener(b,a,false)}else{c.attachEvent("on"+b,function(d){d.preventDefault=function(){return this.returnValue=false};return a(d)})}};Dropbox.removeListener=function(c,b,a){if(c.removeEventListener){c.removeEventListener(b,a,false)}else{c.detachEvent("on"+b,a)}};Dropbox._chooserUrl=function(k,g){var i,h,f,a,e,j,c,b,d;j=encodeURIComponent(window.location.protocol+"//"+window.location.host);i=encodeURIComponent(this.appKey);a=encodeURIComponent(k.linkType||"");c=encodeURIComponent(k._trigger||"js");e=Boolean(k.multiselect);h=encodeURIComponent(((d=k.extensions)!=null?typeof d.join==="function"?d.join(" "):void 0:void 0)||"");f=Boolean(k.folderselect);g=Boolean(g);b=""+this.baseUrl+"/chooser?origin="+j+"&app_key="+i+"&link_type="+a;b+="&trigger="+c+"&multiselect="+e+"&extensions="+h+"&folderselect="+f+"&iframe="+g;return b};Dropbox._saverUrl=function(c){var d,a,b;a=encodeURIComponent(window.location.protocol+"//"+window.location.host);d=encodeURIComponent(this.appKey);b=""+this.baseUrl+"/saver?origin="+a+"&app_key="+d;return b};Dropbox._handleMessageEvent=function(a,f,c){var e,b,d;e=JSON.parse(a.data);switch(e.method){case"ready":if(c.files!=null){d=JSON.stringify({method:"files",params:c.files});if(Dropbox._ieframe&&c._popup){b=Dropbox._ieframe.contentWindow}else{b=a.source}b.postMessage(d,Dropbox.baseUrl)}if(typeof c.ready==="function"){c.ready()}break;case"files_selected":case"files_saved":if(typeof f==="function"){f()}if(typeof c.success==="function"){c.success(e.params)}break;case"progress":if(typeof c.progress==="function"){c.progress(e.params)}break;case"close_dialog":if(typeof f==="function"){f()}if(typeof c.cancel==="function"){c.cancel()}break;case"web_session_error":if(typeof f==="function"){f()}if(typeof c.webSessionFailure==="function"){c.webSessionFailure()}break;case"web_session_unlinked":if(typeof f==="function"){f()}if(typeof c.webSessionUnlinked==="function"){c.webSessionUnlinked()}break;case"resize":if(typeof c.resize==="function"){c.resize(e.params)}break;case"error":if(typeof f==="function"){f()}if(typeof c.error==="function"){c.error(e.params)}break;case"job_id":if(typeof f==="function"){f()}if(typeof c.job_id==="function"){c.job_id(e.params)}break;case"_debug_log":if(typeof console!=="undefined"&&console!==null){console.log(e.params.msg)}}};Dropbox._createIEFrame=function(){var a;if(navigator.appName==="Microsoft Internet Explorer"){a=document.createElement("iframe");a.setAttribute("id","dropbox_xcomm");a.setAttribute("src",Dropbox.baseUrl+"/static/api/1/xcomm.html");a.style.display="none";document.getElementsByTagName("body")[0].appendChild(a);Dropbox._ieframe=a}};Dropbox.createChooserWidget=function(a){var b,c=this;b=this._createWidgetElement(this._chooserUrl(a,true));b._handler=function(d){if(d.source===b.contentWindow&&d.origin===c.baseUrl){c._handleMessageEvent(d,null,a)}};this.addListener(window,"message",b._handler);return b};Dropbox.createWidget=Dropbox.createChooserWidget;Dropbox.cleanupWidget=function(a){if(!a._handler){throw"Invalid widget!"}this.removeListener(window,"message",a._handler);delete a._handler};Dropbox.cleanupChooserWidget=Dropbox.cleanupWidget;Dropbox._popupDimensionsString=function(a,b){var d,c;d=(window.screenX||window.screenLeft)+((window.outerWidth||document.documentElement.offsetWidth)-a)/2;c=(window.screenY||window.screenTop)+((window.outerHeight||document.documentElement.offsetHeight)-b)/2;return"width="+a+",height="+b+",left="+d+",top="+c};var _ref,__slice=[].slice,__indexOf=[].indexOf||function(c){for(var b=0,a=this.length;b<a;b++){if(b in this&&this[b]===c){return b}}return -1};Dropbox.init=function(a){this.appKey=a.appKey};Dropbox._createWidgetElement=function(a){var b;b=document.createElement("iframe");b.src=a;b.style.display="block";b.style.backgroundColor="white";b.style.border="none";return b};Dropbox._jsonpCounter=1;Dropbox._CHOOSER_DOCS_URL="https://www.dropbox.com/developers/dropins/chooser/js";Dropbox._file_extension_buckets=["text","documents","images","video","audio"];if((_ref=Dropbox._dropinsjs_loaded)==null){Dropbox._dropinsjs_loaded=false}Dropbox.saveURL=function(){var a;if((a=window.console)!=null){if(typeof a.warn==="function"){a.warn("Dropbox.saveURL is deprecated.  Please use Dropbox.save")}}return Dropbox.save(arguments[0],arguments[1],arguments[2])};Dropbox._parseSaveArgs=function(g){var c,a,i,b,f,h,e,d;if(typeof g[0]==="string"){b=g.shift();if(typeof g[0]==="string"){a=g.shift()}else{a=Dropbox.filenameFromUrl(b)}i={files:[{url:b,filename:a}]}}else{i=g.shift();if(!(i!=null)){throw"Missing arguments. See documentation."}if(!(((e=i.files)!=null?e.length:void 0)||typeof i.files==="function")){throw"Missing files. See documentation."}d=i.files;for(f=0,h=d.length;f<h;f++){c=d[f];if(!c.filename){c.filename=this.filenameFromUrl(c.url)}}}return i};Dropbox.save=function(){var d,f,e,c,g,b,a,h=this;d=1<=arguments.length?__slice.call(arguments,0):[];c=Dropbox._parseSaveArgs(d);if(!Dropbox.isBrowserSupported()){alert("Your browser does not support the Dropbox Saver");return}c._popup=true;c.job_id=function(j){var i;i=function(){var p,n,o,k,l,m;l=""+h.baseUrl+"/dropins/job_status?job="+j+"&app_key="+h.appKey;o=function(r){var q;if(r.status==="COMPLETE"){if(typeof c.progress==="function"){c.progress(1)}if(typeof c.success==="function"){c.success()}}else{if((q=r.status)==="PENDING"||q==="DOWNLOADING"){if(r.progress!=null){if(typeof c.progress==="function"){c.progress(r.progress/100)}}setTimeout(i,1500)}else{if(r.status==="FAILED"){if(typeof c.error==="function"){c.error(r.error)}}}}};if("withCredentials" in new XMLHttpRequest()){m=new XMLHttpRequest();m.onload=function(){return o(JSON.parse(m.responseText))};m.onerror=function(){return typeof c.error==="function"?c.error():void 0};m.open("GET",l,true);return m.send()}else{p="DropboxJsonpCallback"+Dropbox._jsonpCounter++;n=false;window[p]=function(q){n=true;return o(q)};k=document.createElement("script");k.src=""+l+"&callback="+p;k.onreadystatechange=function(){var q;if(k.readyState==="loaded"){if(!n){if(typeof c.error==="function"){c.error()}}return(q=k.parentNode)!=null?q.removeChild(k):void 0}};return document.getElementsByTagName("head")[0].appendChild(k)}};if(typeof c.progress==="function"){c.progress(0)}return i()};if(!(typeof c.files==="object"&&c.files.length)){throw"Opening the saver failed. The object passed in must have a 'files' property that contains a list of objects.  See documentation.";return}a=c.files;for(g=0,b=a.length;g<b;g++){e=a[g];if(typeof e.url!=="string"){throw"File urls to download incorrectly configured.  Each file must have a url. See documentation."}}f=this._popupDimensionsString(352,237);return this._openPopup(this._saverUrl(c),f,c)};Dropbox._openPopup=function(c,d,b){var f,e,g,a,h;f=function(){if(!a.closed){a.close()}Dropbox.removeListener(window,"message",e);clearInterval(h)};e=function(j){var i;if(j.source===a||j.source===((i=Dropbox._ieframe)!=null?i.contentWindow:void 0)){Dropbox._handleMessageEvent(j,f,b)}};g=function(){if(a.closed){f();if(typeof b.cancel==="function"){b.cancel()}}};a=window.open(c,"dropbox",""+d+",resizable=yes,location=yes");a.focus();h=setInterval(g,100);Dropbox.addListener(window,"message",e);return a};Dropbox._validateChooserOptions=function(d){var e,c,f,b,a,g=this;if(!(d.success!=null)){if(typeof console!=="undefined"&&console!==null){if(typeof console.warn==="function"){console.warn("You must provide a success callback to the Chooser to see the files that the user selects")}}}c=function(){if(typeof console!=="undefined"&&console!==null){if(typeof console.warn==="function"){console.warn("The provided list of extensions or file types is not valid. See Chooser documentation: "+g._CHOOSER_DOCS_URL)}}if(typeof console!=="undefined"&&console!==null){if(typeof console.warn==="function"){console.warn("Available file types are: "+Dropbox._file_extension_buckets.join(", "))}}return delete d.extensions};if(d.extensions!=null){if(Object.prototype.toString.call(d.extensions)==="[object Array]"){a=d.extensions;for(f=0,b=a.length;f<b;f++){e=a[f];if(!e.match(/^\.[\.\w$#&+@!()\-'`_~]+$/)&&__indexOf.call(Dropbox._file_extension_buckets,e)<0){c()}}}else{c()}}return d};Dropbox.choose=function(h){var c,a,f,e,i,g,d,b;if(h==null){h={}}h=Dropbox._validateChooserOptions(h);if(!Dropbox.isBrowserSupported()){alert("Your browser does not support the Dropbox Chooser");return}b=660;e=440;if(h.iframe){d=Dropbox._createWidgetElement(this._chooserUrl(h,true));d.style.width=b+"px";d.style.height=e+"px";g=document.createElement("div");g.style.position="fixed";g.style.left=g.style.right=g.style.top=g.style.bottom="0px";g.style.zIndex="1000";c=document.createElement("div");c.style.position="absolute";c.style.left=c.style.right=c.style.top=c.style.bottom="0px";c.style.backgroundColor="rgb(160, 160, 160)";c.style.opacity="0.2";c.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity=20)";i=document.createElement("div");i.style.position="relative";i.style.width=b+"px";i.style.margin="125px auto 0px auto";i.style.border="1px solid #ACACAC";i.style.boxShadow="rgba(0, 0, 0, .2) 0px 4px 16px";i.appendChild(d);g.appendChild(c);g.appendChild(i);document.body.appendChild(g);f=function(j){if(j.source===d.contentWindow){Dropbox._handleMessageEvent(j,(function(){document.body.removeChild(g);Dropbox.removeListener(window,"message",f)}),h)}};Dropbox.addListener(window,"message",f)}else{a=this._popupDimensionsString(b,e);this._openPopup(this._chooserUrl(h),a,h)}};Dropbox.attach=Dropbox.choose;Dropbox.isBrowserSupported=function(){var a;a=Dropbox._isBrowserSupportedCheck();Dropbox.isBrowserSupported=function(){return a};return a};Dropbox._isBrowserSupportedCheck=function(){var d,c,b,a;a=[/Windows Phone/,/BB10;/,/CriOS/];for(c=0,b=a.length;c<b;c++){d=a[c];if(d.test(navigator.userAgent)){return false}}return true};Dropbox.filenameFromPath=function(a){return a.replace(/\/+$/g,"").split("/").pop()};Dropbox.filenameFromUrl=function(c){var b;b=document.createElement("a");b.href=c;return Dropbox.filenameFromPath(b.pathname)};Dropbox._createDropinButton=function(b,c){var a;if(c!=null){c.innerHTML=""}else{c=document.createElement("a");c.href="#"}c.className+=" dropbox-dropin-btn";if(this.isBrowserSupported()){c.className+=" dropbox-dropin-default"}else{c.className+=" dropbox-dropin-disabled"}a=document.createElement("span");a.className="dropin-btn-status";c.appendChild(a);b=document.createTextNode(b);c.appendChild(b);return c};Dropbox.createSaveButton=function(){var b,c,a;b=1<=arguments.length?__slice.call(arguments,0):[];a=Dropbox._parseSaveArgs(b);c=b.shift();c=Dropbox._createDropinButton("Save to Dropbox",c);Dropbox.addListener(c,"click",function(d){var e;if(d.preventDefault!=null){d.preventDefault()}else{d.returnValue=false}if(!(c.className.indexOf("dropbox-dropin-error")>=0||c.className.indexOf("dropbox-dropin-default")>=0||c.className.indexOf("dropbox-dropin-disabled")>=0)){return}e=(typeof a.files==="function"?a.files():void 0)||a.files;if(!(e!=null?e.length:void 0)){c.className="dropbox-dropin-btn dropbox-dropin-error";if(typeof a.error==="function"){a.error("Missing files")}return}return Dropbox.save({files:e,success:function(){c.className="dropbox-dropin-btn dropbox-dropin-success";if(typeof a.success==="function"){a.success()}},progress:function(f){c.className="dropbox-dropin-btn dropbox-dropin-progress";if(typeof a.progress==="function"){a.progress(f)}},cancel:function(){if(typeof a.cancel==="function"){a.cancel()}},error:function(f){c.className="dropbox-dropin-btn dropbox-dropin-error";if(typeof a.error==="function"){a.error(f)}}})});return c};(function(){var b,d,e,c,f,a,g=this;if(Dropbox._dropinsjs_loaded){if(typeof console!=="undefined"&&console!==null){if(typeof console.warn==="function"){console.warn("dropins.js included more than once")}}return}Dropbox._dropinsjs_loaded=true;f=function(i,h){return"background: "+i+";\nbackground: -moz-linear-gradient(top, "+i+" 0%, "+h+" 100%);\nbackground: -webkit-linear-gradient(top, "+i+" 0%, "+h+" 100%);\nbackground: linear-gradient(to bottom, "+i+" 0%, "+h+" 100%);\nfilter: progid:DXImageTransform.Microsoft.gradient(startColorstr='"+i+"', endColorstr='"+h+"',GradientType=0);"};c=function(l,j,n){var m,i,h;if(n==null){n={}}if(document.createEvent!=null){m=document.createEvent("Event");m.initEvent(j,true,true);for(i in n){h=n[i];m[i]=h}l.dispatchEvent(m)}};if(!Dropbox.appKey){Dropbox.appKey=(a=document.getElementById("dropboxjs"))!=null?a.getAttribute("data-app-key"):void 0}d=document.createElement("style");d.type="text/css";e='@-webkit-keyframes rotate {\n  from  { -webkit-transform: rotate(0deg); }\n  to   { -webkit-transform: rotate(360deg); }\n}\n\n@keyframes rotate {\n  from  { transform: rotate(0deg); }\n  to   { transform: rotate(360deg); }\n}\n\n.dropbox-dropin-btn, .dropbox-dropin-btn:link, .dropbox-dropin-btn:hover {\n  display: inline-block;\n  height: 14px;\n  font-family: "Lucida Grande", "Segoe UI", "Tahoma", "Helvetica Neue", "Helvetica", sans-serif;\n  font-size: 11px;\n  font-weight: 600;\n  color: #636363;\n  text-decoration: none;\n  padding: 1px 7px 5px 3px;\n  border: 1px solid #ebebeb;\n  border-radius: 2px;\n  border-bottom-color: #d4d4d4;\n  '+(f("#fcfcfc","#f5f5f5"))+"\n}\n\n.dropbox-dropin-default:hover, .dropbox-dropin-error:hover {\n  border-color: #dedede;\n  border-bottom-color: #cacaca;\n  "+(f("#fdfdfd","#f5f5f5"))+"\n}\n\n.dropbox-dropin-default:active, .dropbox-dropin-error:active {\n  border-color: #d1d1d1;\n  box-shadow: inset 0 1px 1px rgba(0,0,0,0.1);\n}\n\n.dropbox-dropin-btn .dropin-btn-status {\n  display: inline-block;\n  width: 15px;\n  height: 14px;\n  vertical-align: bottom;\n  margin: 0 5px 0 2px;\n  background: transparent url('"+Dropbox.baseUrl+"/static/images/widgets/dbx-saver-status.png') no-repeat;\n  position: relative;\n  top: 2px;\n}\n\n.dropbox-dropin-default .dropin-btn-status {\n  background-position: 0px 0px;\n}\n\n.dropbox-dropin-progress .dropin-btn-status {\n  width: 18px;\n  margin: 0 4px 0 0;\n  background: url('"+Dropbox.baseUrl+"/static/images/widgets/dbx-progress.png') no-repeat center center;\n  -webkit-animation-name: rotate;\n  -webkit-animation-duration: 1.7s;\n  -webkit-animation-iteration-count: infinite;\n  -webkit-animation-timing-function: linear;\n  animation-name: rotate;\n  animation-duration: 1.7s;\n  animation-iteration-count: infinite;\n  animation-timing-function: linear;\n}\n\n.dropbox-dropin-success .dropin-btn-status {\n  background-position: -15px 0px;\n}\n\n.dropbox-dropin-disabled {\n  background: #e0e0e0;\n  border: 1px #dadada solid;\n  border-bottom: 1px solid #ccc;\n  box-shadow: none;\n}\n\n.dropbox-dropin-disabled .dropin-btn-status {\n  background-position: -30px 0px;\n}\n\n.dropbox-dropin-error .dropin-btn-status {\n  background-position: -45px 0px;\n}\n\n@media only screen and (-webkit-min-device-pixel-ratio: 1.4) {\n  .dropbox-dropin-btn .dropin-btn-status {\n    background-image: url('"+Dropbox.baseUrl+"/static/images/widgets/dbx-saver-status-2x.png');\n    background-size: 60px 14px;\n    -webkit-background-size: 60px 14px;\n  }\n\n  .dropbox-dropin-progress .dropin-btn-status {\n    background: url('"+Dropbox.baseUrl+"/static/images/widgets/dbx-progress-2x.png') no-repeat center center;\n    background-size: 20px 20px;\n    -webkit-background-size: 20px 20px;\n  }\n}\n\n.dropbox-saver:hover, .dropbox-chooser:hover {\n  text-decoration: none;\n  cursor: pointer;\n}\n\n.dropbox-chooser, .dropbox-dropin-btn {\n  line-height: 11px !important;\n  text-decoration: none !important;\n  box-sizing: content-box !important;\n  -webkit-box-sizing: content-box !important;\n  -moz-box-sizing: content-box !important;\n}\n";if(d.styleSheet){d.styleSheet.cssText=e}else{d.textContent=e}document.getElementsByTagName("head")[0].appendChild(d);b=function(){var j,l,k,i,h,n,m;Dropbox._createIEFrame();if(document.removeEventListener){document.removeEventListener("DOMContentLoaded",b,false)}else{if(document.detachEvent){document.detachEvent("onreadystatechange",b)}}n=document.getElementsByTagName("input");for(l=0,i=n.length;l<i;l++){j=n[l];if(j.getAttribute("type")==="dropbox-chooser"){(function(p){var o;o=Dropbox._createDropinButton("Choose from Dropbox");p.style.display="none";Dropbox.addListener(o,"click",function(q){var s,r;if(q.preventDefault!=null){q.preventDefault()}else{q.returnValue=false}Dropbox.choose({success:function(u){var v,t;t=(function(){var y,x,w;w=[];for(y=0,x=u.length;y<x;y++){v=u[y];w.push(v.link)}return w})();p.value=t.join(", ");p.files=u;c(p,"DbxChooserSuccess",{files:u});o.className="dropbox-dropin-btn dropbox-dropin-success"},cancel:function(){c(p,"DbxChooserCancel")},linkType:p.getAttribute("data-link-type")||"preview",multiselect:((s=p.getAttribute("data-multiselect"))==="True"||s==="true"||s==="1")||false,extensions:((r=p.getAttribute("data-extensions"))!=null?r.split(/\s+/):void 0)||[],_trigger:"button"})});p.parentNode.insertBefore(o,p)})(j)}}m=document.getElementsByTagName("a");for(k=0,h=m.length;k<h;k++){j=m[k];if(__indexOf.call((j.getAttribute("class")||"").split(" "),"dropbox-saver")>=0){(function(o){Dropbox.createSaveButton({files:function(){return[{url:o.getAttribute("data-url")||o.href,filename:o.getAttribute("data-filename")||Dropbox.filenameFromPath(o.pathname)}]},success:function(){c(o,"DbxSaverSuccess")},progress:function(p){c(o,"DbxSaverProgress",{progress:p})},cancel:function(){c(o,"DbxSaverCancel")},error:function(p){c(o,"DbxSaverError",{error:p})}},o)})(j)}}};if(document.readyState==="complete"){setTimeout(b,0)}else{if(document.addEventListener){document.addEventListener("DOMContentLoaded",b,false)}else{document.attachEvent("onreadystatechange",b)}}})();